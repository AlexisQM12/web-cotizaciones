(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,a,s)=>{a.exports=e.r(76562)},30175,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(18566);function i(){let[e,i]=(0,s.useState)([]),[t,r]=(0,s.useState)([]),[n,c]=(0,s.useState)(!0),[o,d]=(0,s.useState)({name:"",address:"",email:"",phone:"",ruc:"",website:"",accounts:[],conditions:"",isDefault:!1}),p=["BCP","BBVA","Interbank","Scotiabank","Banco de la Nación","BanBif","Pichincha","Caja Arequipa","Caja Piura","Otros"],[m,u]=(0,s.useState)({name:"",ruc:"",address:"",isDefault:!1}),[h,x]=(0,s.useState)(""),[g,y]=(0,s.useState)(null),[f,b]=(0,s.useState)(null),[j,v]=(0,s.useState)(null),N=(0,l.useRouter)();(0,s.useEffect)(()=>{C(),D()},[]);let C=async()=>{try{let e=await fetch("/api/company-profiles"),a=await e.json();Array.isArray(a)?i(a):(console.error("API Error (Company Profiles):",a.error),i([])),c(!1)}catch(e){console.error(e),c(!1)}},D=async()=>{try{let e=await fetch("/api/client-profiles"),a=await e.json();Array.isArray(a)?r(a):(console.error("API Error (Client Profiles):",a.error),r([]))}catch(e){console.error(e)}},S=async e=>{e.preventDefault();try{let e=f?`/api/company-profiles/${f}`:"/api/company-profiles",a=f?"PUT":"POST",s=new FormData;s.append("name",o.name),s.append("address",o.address),s.append("email",o.email),s.append("phone",o.phone),s.append("phone",o.phone),s.append("ruc",o.ruc),s.append("website",o.website),s.append("accounts",JSON.stringify(o.accounts)),s.append("conditions",o.conditions),s.append("isDefault",o.isDefault.toString()),g&&s.append("logo",g),f&&s.append("existingLogoUrl",o.logoUrl||""),(await fetch(e,{method:a,body:s})).ok&&(d({name:"",address:"",email:"",phone:"",ruc:"",website:"",accounts:[],conditions:"",isDefault:!1}),y(null),b(null),C())}catch(e){console.error(e)}},w=(e,a,s)=>{let l=[...o.accounts];l[e][a]=s,d({...o,accounts:l})},k=async e=>{e.preventDefault();try{let e=j?`/api/client-profiles/${j}`:"/api/client-profiles",a=j?"PUT":"POST";(await fetch(e,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok&&(u({name:"",address:"",email:"",phone:"",isDefault:!1}),v(null),D())}catch(e){console.error(e)}},E=async e=>{if(confirm("¿Estás seguro de que quieres eliminar este perfil de empresa?"))try{await fetch(`/api/company-profiles/${e}`,{method:"DELETE"}),C()}catch(e){console.error(e)}},B=async e=>{if(confirm("¿Estás seguro de que quieres eliminar este perfil de cliente?"))try{await fetch(`/api/client-profiles/${e}`,{method:"DELETE"}),D()}catch(e){console.error(e)}};return(0,a.jsxs)("main",{className:"container",children:[(0,a.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,a.jsx)("button",{onClick:()=>N.push("/"),className:"btn",style:{marginBottom:"1rem",background:"#4b5563",color:"white"},children:"Volver al Dashboard"}),(0,a.jsx)("h1",{style:{color:"#111827"},children:"Configuración de Empresa"}),(0,a.jsx)("p",{style:{color:"#475569"},children:"Administra los datos de tu empresa para las cotizaciones."})]}),(0,a.jsx)("div",{className:"content-frame",children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4rem"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{style:{color:"#101828",marginBottom:"1.5rem",fontSize:"1.5rem"},children:"Perfiles de Empresa"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2.5rem"},children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{children:f?"Editar Perfil de Empresa":"Añadir Nuevo Perfil de Empresa"}),(0,a.jsxs)("form",{onSubmit:S,style:{marginTop:"2rem"},children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Nombre de Empresa"}),(0,a.jsx)("input",{className:"input",type:"text",required:!0,value:o.name,onChange:e=>d({...o,name:e.target.value}),placeholder:"Ej: Mi Empresa S.A."})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"RUC"}),(0,a.jsx)("input",{className:"input",type:"text",value:o.ruc,onChange:e=>d({...o,ruc:e.target.value}),placeholder:"20123456789"})]}),(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Sitio Web"}),(0,a.jsx)("input",{className:"input",type:"text",value:o.website,onChange:e=>d({...o,website:e.target.value}),placeholder:"www.miempresa.com"})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Cuentas Bancarias"}),o.accounts.map((e,s)=>(0,a.jsxs)("div",{style:{marginBottom:"1.25rem",padding:"1.75rem",background:"#f8fafc",border:"1px solid #f1f5f9",borderRadius:"20px"},children:[(0,a.jsxs)("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"0.75rem"},children:[(0,a.jsxs)("select",{className:"input",value:e.bankName,onChange:e=>w(s,"bankName",e.target.value),style:{flex:1},children:[(0,a.jsx)("option",{value:"",children:"Seleccionar Banco"}),p.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsx)("button",{type:"button",className:"btn btn-danger",style:{padding:"0 14px"},onClick:()=>{let e;(e=[...o.accounts]).splice(s,1),d({...o,accounts:e})},children:"✕"})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[(0,a.jsx)("input",{className:"input",type:"text",value:e.accountNumber,onChange:e=>w(s,"accountNumber",e.target.value),placeholder:"Nº de Cuenta"}),(0,a.jsx)("input",{className:"input",type:"text",value:e.cci,onChange:e=>w(s,"cci",e.target.value),placeholder:"CCI (Opcional)"})]})]},s)),(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",style:{width:"100%",fontSize:"0.9rem"},onClick:()=>{d({...o,accounts:[...o.accounts,{bankName:"",accountNumber:"",cci:""}]})},children:"+ Agregar Cuenta Bancaria"})]}),(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Dirección"}),(0,a.jsx)("input",{className:"input",type:"text",value:o.address,onChange:e=>d({...o,address:e.target.value}),placeholder:"Calle Falsa 123"})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Email"}),(0,a.jsx)("input",{className:"input",type:"email",value:o.email,onChange:e=>d({...o,email:e.target.value}),placeholder:"contacto@empresa.com"})]}),(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Teléfono"}),(0,a.jsx)("input",{className:"input",type:"text",value:o.phone,onChange:e=>d({...o,phone:e.target.value}),placeholder:"+51 987 654 321"})]})]}),(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Logo de Empresa"}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[(0,a.jsx)("input",{id:"company-logo-upload",type:"file",accept:"image/*",onChange:e=>y(e.target.files[0]),style:{display:"none"}}),(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>document.getElementById("company-logo-upload").click(),children:g?g.name:"Seleccionar Archivo"}),f&&o.logoUrl&&(0,a.jsx)("img",{src:o.logoUrl,alt:"Logo",style:{width:"64px",height:"64px",objectFit:"contain",borderRadius:"14px",border:"1px solid #f1f5f9"}})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"2.5rem",display:"flex",alignItems:"center",gap:"12px"},children:[(0,a.jsx)("input",{type:"checkbox",id:"companyIsDefault",style:{width:"20px",height:"20px",cursor:"pointer"},checked:o.isDefault,onChange:e=>d({...o,isDefault:e.target.checked})}),(0,a.jsx)("label",{htmlFor:"companyIsDefault",style:{cursor:"pointer",fontWeight:"500",color:"#64748b"},children:"Establecer como predeterminado"})]}),(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Condiciones Generales"}),(0,a.jsx)("textarea",{className:"input",rows:5,value:o.conditions,onChange:e=>d({...o,conditions:e.target.value}),placeholder:"Ingrese los términos y condiciones..."})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"1.25rem"},children:[(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",style:{flex:2},children:f?"Actualizar Perfil":"Guardar Perfil"}),f&&(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",style:{flex:1},onClick:()=>{d({name:"",address:"",email:"",phone:"",ruc:"",website:"",accounts:[],conditions:"",isDefault:!1}),y(null),b(null)},children:"Cancelar"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{style:{marginBottom:"1.5rem"},children:"Perfiles Registrados"}),n?(0,a.jsx)("p",{children:"Cargando..."}):0===e.length?(0,a.jsx)("p",{style:{color:"#64748b"},children:"No hay perfiles configurados."}):(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:e.map(e=>(0,a.jsx)("div",{className:"card",style:{padding:"1.75rem",border:e.isDefault?"1px solid #1e293b":"1px solid #f1f5f9"},children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[e.logoUrl&&(0,a.jsx)("img",{src:e.logoUrl,alt:"Logo",style:{width:"48px",height:"48px",objectFit:"contain"}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{style:{margin:0,fontSize:"1.1rem"},children:e.name||"Sin Nombre"}),(0,a.jsx)("p",{style:{fontSize:"0.85rem",color:"#94a3b8",marginTop:"4px"},children:e.ruc||"Sin RUC"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"end",gap:"1rem"},children:[e.isDefault&&(0,a.jsx)("span",{className:"status-badge",style:{background:"#1e293b",color:"white"},children:"Default"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,a.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>{d({name:e.name,address:e.address,email:e.email,phone:e.phone,ruc:e.ruc||"",website:e.website||"",accounts:e.accounts||[],conditions:e.conditions||"",logoUrl:e.logoUrl,isDefault:1===e.isDefault}),y(null),b(e.id)},children:"Editar"}),(0,a.jsx)("button",{className:"btn btn-danger",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>E(e.id),children:"Borrar"})]})]})]})},e.id))})]})]})]}),(0,a.jsxs)("div",{style:{borderTop:"1px solid #f1f5f9",paddingTop:"4rem"},children:[(0,a.jsx)("h2",{style:{color:"#101828",marginBottom:"1.5rem",fontSize:"1.5rem"},children:"Perfiles de Cliente"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2.5rem"},children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{children:j?"Editar Perfil de Cliente":"Añadir Nuevo Cliente"}),(0,a.jsxs)("form",{onSubmit:k,style:{marginTop:"2rem"},children:[(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Nombre de Cliente"}),(0,a.jsx)("input",{className:"input",type:"text",required:!0,value:m.name,onChange:e=>u({...m,name:e.target.value}),placeholder:"Ej: Juan Pérez"})]}),(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"RUC / DNI"}),(0,a.jsx)("input",{className:"input",type:"text",value:m.ruc,onChange:e=>u({...m,ruc:e.target.value}),placeholder:"12345678901"})]}),(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("label",{className:"label",children:"Dirección"}),(0,a.jsx)("input",{className:"input",type:"text",value:m.address,onChange:e=>u({...m,address:e.target.value}),placeholder:"Calle Falsa 123"})]}),(0,a.jsxs)("div",{style:{marginBottom:"2.5rem",display:"flex",alignItems:"center",gap:"12px"},children:[(0,a.jsx)("input",{type:"checkbox",id:"clientIsDefault",style:{width:"20px",height:"20px",cursor:"pointer"},checked:m.isDefault,onChange:e=>u({...m,isDefault:e.target.checked})}),(0,a.jsx)("label",{htmlFor:"clientIsDefault",style:{cursor:"pointer",fontWeight:"500",color:"#64748b"},children:"Establecer como predeterminado"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"1.25rem"},children:[(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",style:{flex:2},children:j?"Actualizar Perfil":"Guardar Perfil"}),j&&(0,a.jsx)("button",{type:"button",className:"btn btn-secondary",style:{flex:1},onClick:()=>v(null),children:"Cancelar"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{style:{marginBottom:"1.5rem"},children:"Clientes Registrados"}),0===t.length?(0,a.jsx)("p",{style:{color:"#64748b"},children:"No hay perfiles configurados."}):(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:t.map(e=>(0,a.jsx)("div",{className:"card",style:{padding:"1.75rem",border:e.isDefault?"1px solid #1e293b":"1px solid #f1f5f9"},children:(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{style:{margin:0,fontSize:"1.1rem"},children:e.name||"Sin Nombre"}),(0,a.jsx)("p",{style:{fontSize:"0.85rem",color:"#94a3b8",marginTop:"4px"},children:e.address||"Sin Dirección"})]}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"end",gap:"1rem"},children:[e.isDefault&&(0,a.jsx)("span",{className:"status-badge",style:{background:"#1e293b",color:"white"},children:"Default"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,a.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>{u({name:e.name,ruc:e.ruc,address:e.address,isDefault:1===e.isDefault}),v(e.id)},children:"Editar"}),(0,a.jsx)("button",{className:"btn btn-danger",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>B(e.id),children:"Borrar"})]})]})]})},e.id))})]})]})]})]})})]})}e.s(["default",()=>i])}]);