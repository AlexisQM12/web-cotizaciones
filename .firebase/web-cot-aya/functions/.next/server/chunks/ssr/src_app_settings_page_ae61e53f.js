module.exports=[73280,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);function e(){let[a,e]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)({name:"",address:"",email:"",phone:"",ruc:"",website:"",accounts:[],conditions:"",isDefault:!1}),l=["BCP","BBVA","Interbank","Scotiabank","Banco de la Nación","BanBif","Pichincha","Caja Arequipa","Caja Piura","Otros"],[m,n]=(0,c.useState)({name:"",ruc:"",address:"",isDefault:!1}),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(null),w=(0,d.useRouter)();(0,c.useEffect)(()=>{x(),y()},[]);let x=async()=>{try{let a=await fetch("/api/company-profiles"),b=await a.json();Array.isArray(b)?e(b):(console.error("API Error (Company Profiles):",b.error),e([])),i(!1)}catch(a){console.error(a),i(!1)}},y=async()=>{try{let a=await fetch("/api/client-profiles"),b=await a.json();Array.isArray(b)?g(b):(console.error("API Error (Client Profiles):",b.error),g([]))}catch(a){console.error(a)}},z=async a=>{a.preventDefault();try{let a=s?`/api/company-profiles/${s}`:"/api/company-profiles",b=s?"PUT":"POST",c=new FormData;c.append("name",j.name),c.append("address",j.address),c.append("email",j.email),c.append("phone",j.phone),c.append("phone",j.phone),c.append("ruc",j.ruc),c.append("website",j.website),c.append("accounts",JSON.stringify(j.accounts)),c.append("conditions",j.conditions),c.append("isDefault",j.isDefault.toString()),q&&c.append("logo",q),s&&c.append("existingLogoUrl",j.logoUrl||""),(await fetch(a,{method:b,body:c})).ok&&(k({name:"",address:"",email:"",phone:"",ruc:"",website:"",accounts:[],conditions:"",isDefault:!1}),r(null),t(null),x())}catch(a){console.error(a)}},A=(a,b,c)=>{let d=[...j.accounts];d[a][b]=c,k({...j,accounts:d})},B=async a=>{a.preventDefault();try{let a=u?`/api/client-profiles/${u}`:"/api/client-profiles",b=u?"PUT":"POST";(await fetch(a,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok&&(n({name:"",address:"",email:"",phone:"",isDefault:!1}),v(null),y())}catch(a){console.error(a)}},C=async a=>{if(confirm("¿Estás seguro de que quieres eliminar este perfil de empresa?"))try{await fetch(`/api/company-profiles/${a}`,{method:"DELETE"}),x()}catch(a){console.error(a)}},D=async a=>{if(confirm("¿Estás seguro de que quieres eliminar este perfil de cliente?"))try{await fetch(`/api/client-profiles/${a}`,{method:"DELETE"}),y()}catch(a){console.error(a)}};return(0,b.jsxs)("main",{className:"container",children:[(0,b.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,b.jsx)("button",{onClick:()=>w.push("/"),className:"btn",style:{marginBottom:"1rem",background:"#4b5563",color:"white"},children:"Volver al Dashboard"}),(0,b.jsx)("h1",{style:{color:"#111827"},children:"Configuración de Empresa"}),(0,b.jsx)("p",{style:{color:"#475569"},children:"Administra los datos de tu empresa para las cotizaciones."})]}),(0,b.jsx)("div",{className:"content-frame",children:(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4rem"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{style:{color:"#101828",marginBottom:"1.5rem",fontSize:"1.5rem"},children:"Perfiles de Empresa"}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2.5rem"},children:[(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{children:s?"Editar Perfil de Empresa":"Añadir Nuevo Perfil de Empresa"}),(0,b.jsxs)("form",{onSubmit:z,style:{marginTop:"2rem"},children:[(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Nombre de Empresa"}),(0,b.jsx)("input",{className:"input",type:"text",required:!0,value:j.name,onChange:a=>k({...j,name:a.target.value}),placeholder:"Ej: Mi Empresa S.A."})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"RUC"}),(0,b.jsx)("input",{className:"input",type:"text",value:j.ruc,onChange:a=>k({...j,ruc:a.target.value}),placeholder:"20123456789"})]}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Sitio Web"}),(0,b.jsx)("input",{className:"input",type:"text",value:j.website,onChange:a=>k({...j,website:a.target.value}),placeholder:"www.miempresa.com"})]})]}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Cuentas Bancarias"}),j.accounts.map((a,c)=>(0,b.jsxs)("div",{style:{marginBottom:"1.25rem",padding:"1.75rem",background:"#f8fafc",border:"1px solid #f1f5f9",borderRadius:"20px"},children:[(0,b.jsxs)("div",{style:{display:"flex",gap:"0.75rem",marginBottom:"0.75rem"},children:[(0,b.jsxs)("select",{className:"input",value:a.bankName,onChange:a=>A(c,"bankName",a.target.value),style:{flex:1},children:[(0,b.jsx)("option",{value:"",children:"Seleccionar Banco"}),l.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)("button",{type:"button",className:"btn btn-danger",style:{padding:"0 14px"},onClick:()=>{let a;(a=[...j.accounts]).splice(c,1),k({...j,accounts:a})},children:"✕"})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem"},children:[(0,b.jsx)("input",{className:"input",type:"text",value:a.accountNumber,onChange:a=>A(c,"accountNumber",a.target.value),placeholder:"Nº de Cuenta"}),(0,b.jsx)("input",{className:"input",type:"text",value:a.cci,onChange:a=>A(c,"cci",a.target.value),placeholder:"CCI (Opcional)"})]})]},c)),(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",style:{width:"100%",fontSize:"0.9rem"},onClick:()=>{k({...j,accounts:[...j.accounts,{bankName:"",accountNumber:"",cci:""}]})},children:"+ Agregar Cuenta Bancaria"})]}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Dirección"}),(0,b.jsx)("input",{className:"input",type:"text",value:j.address,onChange:a=>k({...j,address:a.target.value}),placeholder:"Calle Falsa 123"})]}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1.5rem"},children:[(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Email"}),(0,b.jsx)("input",{className:"input",type:"email",value:j.email,onChange:a=>k({...j,email:a.target.value}),placeholder:"contacto@empresa.com"})]}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Teléfono"}),(0,b.jsx)("input",{className:"input",type:"text",value:j.phone,onChange:a=>k({...j,phone:a.target.value}),placeholder:"+51 987 654 321"})]})]}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Logo de Empresa"}),(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2rem"},children:[(0,b.jsx)("input",{id:"company-logo-upload",type:"file",accept:"image/*",onChange:a=>r(a.target.files[0]),style:{display:"none"}}),(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>document.getElementById("company-logo-upload").click(),children:q?q.name:"Seleccionar Archivo"}),s&&j.logoUrl&&(0,b.jsx)("img",{src:j.logoUrl,alt:"Logo",style:{width:"64px",height:"64px",objectFit:"contain",borderRadius:"14px",border:"1px solid #f1f5f9"}})]})]}),(0,b.jsxs)("div",{style:{marginBottom:"2.5rem",display:"flex",alignItems:"center",gap:"12px"},children:[(0,b.jsx)("input",{type:"checkbox",id:"companyIsDefault",style:{width:"20px",height:"20px",cursor:"pointer"},checked:j.isDefault,onChange:a=>k({...j,isDefault:a.target.checked})}),(0,b.jsx)("label",{htmlFor:"companyIsDefault",style:{cursor:"pointer",fontWeight:"500",color:"#64748b"},children:"Establecer como predeterminado"})]}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Condiciones Generales"}),(0,b.jsx)("textarea",{className:"input",rows:5,value:j.conditions,onChange:a=>k({...j,conditions:a.target.value}),placeholder:"Ingrese los términos y condiciones..."})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1.25rem"},children:[(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",style:{flex:2},children:s?"Actualizar Perfil":"Guardar Perfil"}),s&&(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",style:{flex:1},onClick:()=>{k({name:"",address:"",email:"",phone:"",ruc:"",website:"",accounts:[],conditions:"",isDefault:!1}),r(null),t(null)},children:"Cancelar"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{style:{marginBottom:"1.5rem"},children:"Perfiles Registrados"}),h?(0,b.jsx)("p",{children:"Cargando..."}):0===a.length?(0,b.jsx)("p",{style:{color:"#64748b"},children:"No hay perfiles configurados."}):(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:a.map(a=>(0,b.jsx)("div",{className:"card",style:{padding:"1.75rem",border:a.isDefault?"1px solid #1e293b":"1px solid #f1f5f9"},children:(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1.25rem"},children:[a.logoUrl&&(0,b.jsx)("img",{src:a.logoUrl,alt:"Logo",style:{width:"48px",height:"48px",objectFit:"contain"}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{style:{margin:0,fontSize:"1.1rem"},children:a.name||"Sin Nombre"}),(0,b.jsx)("p",{style:{fontSize:"0.85rem",color:"#94a3b8",marginTop:"4px"},children:a.ruc||"Sin RUC"})]})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"end",gap:"1rem"},children:[a.isDefault&&(0,b.jsx)("span",{className:"status-badge",style:{background:"#1e293b",color:"white"},children:"Default"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,b.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>{k({name:a.name,address:a.address,email:a.email,phone:a.phone,ruc:a.ruc||"",website:a.website||"",accounts:a.accounts||[],conditions:a.conditions||"",logoUrl:a.logoUrl,isDefault:1===a.isDefault}),r(null),t(a.id)},children:"Editar"}),(0,b.jsx)("button",{className:"btn btn-danger",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>C(a.id),children:"Borrar"})]})]})]})},a.id))})]})]})]}),(0,b.jsxs)("div",{style:{borderTop:"1px solid #f1f5f9",paddingTop:"4rem"},children:[(0,b.jsx)("h2",{style:{color:"#101828",marginBottom:"1.5rem",fontSize:"1.5rem"},children:"Perfiles de Cliente"}),(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2.5rem"},children:[(0,b.jsxs)("div",{className:"card",children:[(0,b.jsx)("h3",{children:u?"Editar Perfil de Cliente":"Añadir Nuevo Cliente"}),(0,b.jsxs)("form",{onSubmit:B,style:{marginTop:"2rem"},children:[(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Nombre de Cliente"}),(0,b.jsx)("input",{className:"input",type:"text",required:!0,value:m.name,onChange:a=>n({...m,name:a.target.value}),placeholder:"Ej: Juan Pérez"})]}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"RUC / DNI"}),(0,b.jsx)("input",{className:"input",type:"text",value:m.ruc,onChange:a=>n({...m,ruc:a.target.value}),placeholder:"12345678901"})]}),(0,b.jsxs)("div",{className:"input-group",children:[(0,b.jsx)("label",{className:"label",children:"Dirección"}),(0,b.jsx)("input",{className:"input",type:"text",value:m.address,onChange:a=>n({...m,address:a.target.value}),placeholder:"Calle Falsa 123"})]}),(0,b.jsxs)("div",{style:{marginBottom:"2.5rem",display:"flex",alignItems:"center",gap:"12px"},children:[(0,b.jsx)("input",{type:"checkbox",id:"clientIsDefault",style:{width:"20px",height:"20px",cursor:"pointer"},checked:m.isDefault,onChange:a=>n({...m,isDefault:a.target.checked})}),(0,b.jsx)("label",{htmlFor:"clientIsDefault",style:{cursor:"pointer",fontWeight:"500",color:"#64748b"},children:"Establecer como predeterminado"})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"1.25rem"},children:[(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",style:{flex:2},children:u?"Actualizar Perfil":"Guardar Perfil"}),u&&(0,b.jsx)("button",{type:"button",className:"btn btn-secondary",style:{flex:1},onClick:()=>v(null),children:"Cancelar"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{style:{marginBottom:"1.5rem"},children:"Clientes Registrados"}),0===f.length?(0,b.jsx)("p",{style:{color:"#64748b"},children:"No hay perfiles configurados."}):(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1.25rem"},children:f.map(a=>(0,b.jsx)("div",{className:"card",style:{padding:"1.75rem",border:a.isDefault?"1px solid #1e293b":"1px solid #f1f5f9"},children:(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{style:{margin:0,fontSize:"1.1rem"},children:a.name||"Sin Nombre"}),(0,b.jsx)("p",{style:{fontSize:"0.85rem",color:"#94a3b8",marginTop:"4px"},children:a.address||"Sin Dirección"})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"end",gap:"1rem"},children:[a.isDefault&&(0,b.jsx)("span",{className:"status-badge",style:{background:"#1e293b",color:"white"},children:"Default"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,b.jsx)("button",{className:"btn btn-secondary",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>{n({name:a.name,ruc:a.ruc,address:a.address,isDefault:1===a.isDefault}),v(a.id)},children:"Editar"}),(0,b.jsx)("button",{className:"btn btn-danger",style:{fontSize:"0.8rem",padding:"6px 10px"},onClick:()=>D(a.id),children:"Borrar"})]})]})]})},a.id))})]})]})]})]})})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=src_app_settings_page_ae61e53f.js.map